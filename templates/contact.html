{% extends 'base.html' %}

{% block title %}Contacto{% endblock %}

{% block content %}
<section class="bg-light p-4" id="contact">
  <div class="container">
    <div class="row align-items-center g-lg-5 py-5">
      <div class="col-lg-6 text-center text-lg-start">
        <h2 class="display-4 fw-bold lh-1 mb-3">Contáctanos</h2>
        <p class="col-lg-10 fs-4">
          Complete el formulario de contacto y a la brevedad nos comunicaremos con ud.
        </p>
      </div>
      <div class="col-md-10 mx-auto col-lg-6">
        <form class="p-4 p-md-5 border rounded-3 bg-white"
                method="POST"
                id="formulario">
            <div class="mb-3">
                <label for="name" class="form-label">Nombre completo</label>
                <input type="text" class="form-control" id="name" name="name" required>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Correo electrónico</label>
                <input type="email" class="form-control" id="email" name="email" required>
            </div>
            <div class="mb-3">
                <label for="message" class="form-label">Mensaje</label>
                <textarea class="form-control" name="message" id="message" rows="5" required></textarea>
            </div>
            <!-- Estado del envío -->
            <div id="form-status" class="text-center mb-3 text-success fw-bold"></div>
            <!-- Campo oculto para redirección -->
            <input type="hidden" name="_redirect" value="{{ url_for('send_mail', _external=True) }}">
            
            <button type="submit" class="btn btn-primary" style="width: 100%;">Enviar</button>
            </form>
        <div id="error" class="text-danger mt-2"></div>
      </div>
    </div>
  </div>
</section>

<div class="position-fixed top-0 end-0 p-3" style="z-index: 9999">
  <div id="toastSuccess" class="toast align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">
        ¡Mensaje enviado con éxito!
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
    </div>
  </div>
</div>

{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/validation.js') }}" defer></script>
{% endblock %}